# 未了タスク・優先度

## 現在のプロジェクト状況

### 主要フォーカス: AglaError フレームワーク移行
**優先度: 最高（Critical）**

プロジェクトは現在、統一された構造化エラーハンドリングシステムである **AglaError フレームワーク** への移行に重点を置いています。

## 高優先度タスク（Critical）

### 1. パッケージ統合作業
**対象**: `@esta-core/error-handler` と `@esta-error/error-handler`

#### 現在の問題
- 同一機能を持つ2つのパッケージが存在
- エラーハンドリングロジックの重複
- 依存関係の混乱

#### 必要な作業
```bash
# 重複パッケージの確認
ls packages/@esta-core/error-handler
ls packages/@esta-error/error-handler

# 機能比較・統合計画策定
# 統合後の単一パッケージへの移行
# 既存依存関係の更新
```

#### 完了基準
- [ ] 機能重複の解消
- [ ] 単一エラーハンドラーパッケージへの統合
- [ ] 全依存パッケージの参照更新
- [ ] 統合テストの成功

### 2. AglaError 型システムの完成
**対象**: `@shared/types` パッケージ

#### 現在の実装状況
✅ **完了済み**:
- `AglaError` 基本クラス実装
- `ErrorSeverity` 列挙型定義
- `AglaErrorContext` インターフェース実装
- エラーチェーン機能
- JSON シリアライゼーション機能
- 包括的テストスイート（4層）

#### 追加検討事項
- [ ] パフォーマンス最適化
- [ ] 外部ログシステム統合
- [ ] 国際化対応検討

### 3. テスト最適化
**対象**: 全パッケージ

#### 現在の課題
- テスト実行時間の最適化
- テストカバレッジの均一化
- E2E テストの安定化

#### 必要な作業
- [ ] テスト並列化の改善
- [ ] 重複テストケースの統合
- [ ] テストデータ管理の改善
- [ ] CI/CD での実行時間短縮

## 中優先度タスク（High）

### 4. モノレポ構造最適化
**対象**: 全体アーキテクチャ

#### パッケージ整理状況
**進行中の大規模リファクタリング**
- 一部パッケージは移行中または最近移動・リネームされた状態
- パッケージ間依存関係の最適化が必要

#### 必要な作業
- [ ] `@agla-*` パッケージの `@esta-*` への移行計画
- [ ] パッケージ依存関係グラフの最適化
- [ ] 未使用パッケージの特定・削除
- [ ] ワークスペース設定の最適化

### 5. ドキュメント体系化
**対象**: プロジェクト文書

#### 現在の状況
✅ **今回完成**:
- `docs/claude/` ディレクトリの体系化
- 8つの主要文書の作成
- MCP ツール対応フォーマット

#### 追加作業
- [ ] API ドキュメント自動生成
- [ ] ユーザーガイドの充実
- [ ] 開発者オンボーディング改善
- [ ] チュートリアル作成

## 通常優先度タスク（Medium）

### 6. 設定管理改善
**対象**: 中央集約設定システム

#### 改善点
- [ ] 設定同期スクリプトの自動化
- [ ] パッケージ間設定の一貫性確保
- [ ] VS Code 設定の最適化
- [ ] 開発環境セットアップの簡素化

### 7. パフォーマンス最適化
**対象**: ビルド・テスト実行時間

#### 最適化領域
- [ ] tsup ビルド設定の改善
- [ ] Vitest 実行時間短縮
- [ ] キャッシュ戦略の改善
- [ ] 並列処理の活用

### 8. GitHub Actions 最適化
**対象**: CI/CD パイプライン

#### 改善点
- [ ] ビルドマトリックスの最適化
- [ ] キャッシュ戦略の改善
- [ ] 失敗通知の改善
- [ ] セキュリティスキャン強化

## 低優先度タスク（Low）

### 9. ツールチェーン更新
**対象**: 開発ツール・依存関係

#### 更新検討
- [ ] TypeScript バージョン更新
- [ ] ESLint ルール見直し
- [ ] Vitest 新機能活用
- [ ] pnpm バージョン更新

### 10. 外部統合改善
**対象**: 外部ツール・サービス統合

#### 検討事項
- [ ] 追加的なリント設定
- [ ] 外部ログサービス統合
- [ ] パフォーマンス監視ツール
- [ ] セキュリティスキャン強化

## 技術的負債（Technical Debt）

### レガシーコード整理
**対象**: `@agla-*` パッケージ

#### 対処が必要な項目
- [ ] 古い設定ファイルの削除
- [ ] 未使用インポートの削除
- [ ] 重複コードの統合
- [ ] 非推奨 API の更新

### コード品質改善
**対象**: 全パッケージ

#### 改善領域
- [ ] 複雑な関数の分割
- [ ] 型安全性の強化
- [ ] エラーハンドリングの統一
- [ ] パフォーマンス改善

## 今後の検討事項（Future Considerations）

### 新機能検討
- [ ] プラグインシステム拡張
- [ ] 設定 UI の検討
- [ ] リアルタイムログ監視
- [ ] 分散システム対応

### アーキテクチャ進化
- [ ] マイクロサービス対応
- [ ] クラウドネイティブ対応
- [ ] コンテナ化対応
- [ ] Serverless 対応

## タスク管理プロセス

### 進捗確認コマンド
```bash
# 現在のブランチ状況確認
git status
git branch -v

# パッケージ状況確認
pnpm list --recursive --depth=0

# テスト状況確認
pnpm run test:ci
```

### 定期レビュー項目
1. **週次**: 高優先度タスクの進捗確認
2. **月次**: 中・低優先度タスクの見直し
3. **四半期**: プロジェクト全体の方向性確認

## 重要な意思決定待ち

### アーキテクチャ決定
- [ ] `@agla-*` と `@esta-*` の最終的な統合方針
- [ ] エラーハンドリングの統一インターフェース
- [ ] テスト戦略の最適化方針

### ツール選択
- [ ] 追加的な品質保証ツール
- [ ] CI/CD プラットフォーム最適化
- [ ] モニタリング・ログ収集ツール

## 完了済みマイルストーン

### 最近完了した主要タスク
✅ **AglaError 基本実装完了** (2024)
- AglaError クラスの完全実装
- 4層テスト戦略の実装
- 包括的なテストカバレッジ達成

✅ **ドキュメント体系化完了** (2024)
- `docs/claude/` 構造の確立
- MCP ツール対応文書作成
- 開発者ガイド整備

✅ **品質保証システム確立** (2024)
- lefthook による自動化
- 多層品質チェック
- CI/CD パイプライン整備

## 次のマイルストーン目標

### 短期目標（1-2ヶ月）
1. パッケージ統合の完了
2. テスト最適化の実装
3. 残存技術的負債の解消

### 中期目標（3-6ヶ月）
1. モノレポ構造の最適化完了
2. パフォーマンス目標達成
3. 新機能開発の再開

### 長期目標（6ヶ月以上）
1. 外部統合の充実
2. 新アーキテクチャの検討・実装
3. プロダクション環境での安定運用